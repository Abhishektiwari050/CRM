class Tutorial{constructor(){this.steps=[],this.currentStep=0,this.overlay=null,this.tooltip=null,this.completed=localStorage.getItem('tutorial_completed')==='true'}init(e){if(this.completed)return;this.steps=e,this.createOverlay(),this.createTooltip(),this.start()}createOverlay(){this.overlay=document.createElement('div'),this.overlay.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:9998;display:none',document.body.appendChild(this.overlay)}createTooltip(){this.tooltip=document.createElement('div'),this.tooltip.style.cssText='position:fixed;background:#fff;border-radius:12px;padding:24px;max-width:400px;z-index:9999;box-shadow:0 20px 60px rgba(0,0,0,.3);display:none',this.tooltip.innerHTML=`<div class="tutorial-content"><h3 style="margin:0 0 12px;font-size:18px;color:#1e293b"></h3><p style="margin:0 0 20px;color:#64748b;font-size:14px;line-height:1.6"></p><div style="display:flex;justify-content:space-between;align-items:center"><button class="tutorial-skip" style="background:none;border:none;color:#64748b;cursor:pointer;font-size:14px">Skip Tutorial</button><div style="display:flex;gap:8px"><button class="tutorial-prev" style="padding:8px 16px;border:2px solid #e2e8f0;background:#fff;border-radius:6px;cursor:pointer;font-size:14px;font-weight:600;color:#64748b">Previous</button><button class="tutorial-next" style="padding:8px 16px;border:none;background:#667eea;color:#fff;border-radius:6px;cursor:pointer;font-size:14px;font-weight:600">Next</button></div></div></div>`,document.body.appendChild(this.tooltip),this.tooltip.querySelector('.tutorial-skip').onclick=()=>this.skip(),this.tooltip.querySelector('.tutorial-prev').onclick=()=>this.prev(),this.tooltip.querySelector('.tutorial-next').onclick=()=>this.next()}start(){this.overlay.style.display='block',this.showStep(0)}showStep(e){if(e<0||e>=this.steps.length)return;this.currentStep=e;const t=this.steps[e],s=document.querySelector(t.target);if(!s)return this.next();const r=s.getBoundingClientRect();s.style.position='relative',s.style.zIndex='9999',this.tooltip.querySelector('h3').textContent=t.title,this.tooltip.querySelector('p').textContent=t.content,this.tooltip.style.display='block',this.tooltip.style.top=r.bottom+10+'px',this.tooltip.style.left=Math.min(r.left,window.innerWidth-420)+'px',this.tooltip.querySelector('.tutorial-prev').style.display=e===0?'none':'block',this.tooltip.querySelector('.tutorial-next').textContent=e===this.steps.length-1?'Finish':'Next'}next(){this.currentStep<this.steps.length-1?this.showStep(this.currentStep+1):this.finish()}prev(){this.currentStep>0&&this.showStep(this.currentStep-1)}skip(){confirm('Skip tutorial? You can restart it anytime from settings.')&&this.finish()}finish(){this.overlay.style.display='none',this.tooltip.style.display='none',localStorage.setItem('tutorial_completed','true'),this.completed=!0,document.querySelectorAll('[style*="z-index: 9999"]').forEach(e=>e.style.zIndex='')}}window.Tutorial=Tutorial;window.startTutorial=role=>{const steps=role==='employee'?[{target:'.sidebar-header',title:'Welcome to Your Dashboard',content:'This is your employee dashboard. Use the sidebar to navigate between different sections.'},{target:'a[href*="activity"]',title:'Log Activities',content:'Click here to log your client interactions and activities.'},{target:'.stats-grid',title:'Your Statistics',content:'View your performance metrics including total clients, overdue tasks, and more.'},{target:'#clientsBody',title:'Client List',content:'All your assigned clients are listed here with their current status.'}]:role==='manager'?[{target:'.sidebar-header',title:'Manager Dashboard',content:'Welcome! This is your manager dashboard with team overview and analytics.'},{target:'#performanceChart',title:'Performance Analytics',content:'View team performance metrics and trends over time.'},{target:'#performanceBody',title:'Employee Performance',content:'Monitor individual employee performance and efficiency ratings.'},{target:'a[href*="management"]',title:'Team Management',content:'Add or remove employees and manage client assignments.'}]:[];if(steps.length>0){const t=new Tutorial;t.init(steps)}};
